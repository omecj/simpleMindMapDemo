<template>
  <div class="simpleMindMap">
    <div id="mindMapContainer"></div>
  </div>
</template>

<script setup>
import {onMounted, ref} from 'vue';
import MindMap from "simple-mind-map";
import {cloneDeep} from 'lodash'

const activeNodes = ref([])

// eslint-disable-next-line no-unused-vars
const addNote = () => {
  activeNodes.value.forEach(node => {
    node.setNote("å“ˆå“ˆ123456ðŸš…ðŸš•ðŸšŽðŸšŽðŸ˜ŠðŸ‘ðŸ˜ðŸ¤¦â€â™€ï¸")
  })
}

onMounted(() => {
  // eslint-disable-next-line no-unused-vars
  const mindMap = new MindMap({
    el: document.getElementById("mindMapContainer"),
    data: {
      data: {
        text: "æ ¹èŠ‚ç‚¹",
        note: "å‰æï¼šå·²å®‰è£…node.jså’Œnpmçš„å›½å†…é•œåƒcnpm\n" +
            "1ã€å…ˆä¸‹è½½å®‰è£…npm\n" +
            "2ã€å…¨å±€å®‰è£…cnpm\n" +
            "\n" +
            "npm install -g cnpm --registry=https://registry.npm.taobao.org\n" +
            "3ã€å…¨å±€å®‰è£…vue-cli\n" +
            "\n" +
            "cnpm install --global vue-cli\n" +
            "æˆ–\n" +
            "cnpm intall vue-cli -g\n" +
            "æŸ¥çœ‹æ˜¯å¦å®‰è£…node\n" +
            "node -v\n" +
            "æŸ¥çœ‹æ˜¯å¦å®‰è£…npm\n" +
            "npm -v\n" +
            "æŸ¥çœ‹æ˜¯å¦å®‰è£…vue-cli\n" +
            "npm list\n" +
            "4ã€åˆå§‹åŒ–vueé¡¹ç›®\n" +
            "æ–¹æ³•ä¸€ï¼šåœ¨è¯¥ç›®å½•ä¸‹åˆå§‹åŒ–é¡¹ç›®\n" +
            "\n" +
            "vue init webpack\n" +
            "æ–¹æ³•äºŒï¼šåœ¨è¯¥ç›®å½•ä¸‹æ–°å»ºé¡¹ç›®\n" +
            "\n" +
            "\n" +
            "vue init webpack 'mytest'"
      },
      children: [],
    },
  });
  mindMap.on('node_active', (node, nodeList) => {
    activeNodes.value = cloneDeep(nodeList)
  })

})
</script>

<style lang='scss' scoped>
.simpleMindMap {
  width: 100%;
  height: 100%;
  padding: 0;
  box-sizing: border-box;
  background-color: #fff;
  position: relative;

  #mindMapContainer {
    width: 100%;
    height: 100%;
  }
}
</style>